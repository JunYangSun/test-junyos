(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4554],{10:(e,t,r)=>{"use strict";r.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>l,Zp:()=>s,aR:()=>i});var n=r(9700);r(1464);var a=r(1687);function s(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function i(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function l(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...r})}function o(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t),...r})}function c(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...r})}},131:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n=r(9700),a=r(1464),s=r(3041),i=r(3143),l=r(10),o=r(7544),c=r(3144),d=r.n(c);function u(){let[e,t]=(0,a.useState)(null),[r,c]=(0,a.useState)(!1),[u,f]=(0,a.useState)(null),p=async()=>{c(!0),f(null);try{let e=await (0,s.Jt)("/admin/agent/list");t(e.data),i.oR.success("数据加载成功")}catch(e){f(e)}finally{c(!1)}};(0,a.useEffect)(()=>{p()},[]);let h=(null==e?void 0:e.records)||[],m=(null==e?void 0:e.total)||0;return(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"客户端 API 测试页面"}),(0,n.jsxs)("p",{className:"text-gray-600 mt-2",children:["使用 fetch 函数测试客户端请求"," ",m>0&&"(共 ".concat(m," 条数据)")]})]}),(0,n.jsx)(o.$,{onClick:()=>p(),disabled:r,className:"cursor-pointer",children:r?"刷新中...":"刷新数据"})]}),r&&!e&&(0,n.jsx)(l.Zp,{children:(0,n.jsx)(l.Wu,{className:"pt-6 text-center",children:(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,n.jsx)("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,n.jsx)("span",{className:"text-gray-600",children:"加载中..."})]})})}),u&&(0,n.jsx)(l.Zp,{className:"mb-6 border-red-200 bg-red-50",children:(0,n.jsx)(l.Wu,{className:"pt-6",children:(0,n.jsxs)("p",{className:"text-red-600",children:["请求失败: ",u.message]})})}),!r&&!u&&0===h.length&&(0,n.jsx)(l.Zp,{children:(0,n.jsx)(l.Wu,{className:"pt-6 text-center text-gray-500",children:"暂无数据"})}),!u&&h.length>0&&(0,n.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:h.map((e,t)=>(0,n.jsxs)(l.Zp,{className:r?"opacity-50":"",children:[(0,n.jsxs)(l.aR,{children:[(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsx)(l.ZB,{className:"text-lg",children:null==e?void 0:e.agentName}),(0,n.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("active"===e.status||"1"===e.status?"bg-green-100 text-green-700":"inactive"===e.status||"0"===e.status?"bg-gray-100 text-gray-700":"bg-yellow-100 text-yellow-700"),children:e.status})]}),e.type&&(0,n.jsxs)(l.BT,{className:"mt-1",children:["类型: ",e.type]})]}),(0,n.jsxs)(l.Wu,{children:[e.description&&(0,n.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,n.jsxs)("div",{className:"space-y-1 text-xs text-gray-500",children:[(0,n.jsxs)("div",{children:["ID: ",e.id]}),e.createdAt&&(0,n.jsxs)("div",{children:["创建时间: ",new Date(e.createdAt).toLocaleString()]}),e.updatedAt&&(0,n.jsxs)("div",{children:["更新时间: ",new Date(e.updatedAt).toLocaleString()]})]})]})]},"".concat(null==e?void 0:e.id,"-").concat(t)))}),(0,n.jsx)(l.Zp,{className:"mt-6 bg-blue-50 border-blue-200",children:(0,n.jsx)(l.Wu,{className:"pt-6",children:(0,n.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,n.jsx)("strong",{children:"客户端渲染 (fetch):"}),' 此页面使用客户端渲染，通过 fetch 函数调用 API。 点击"刷新数据"按钮可以重新请求接口。'," ",(0,n.jsx)(d(),{href:"/list",className:"text-blue-600 hover:text-blue-700 underline font-medium",children:"查看 serverGet 版本"})," | ",(0,n.jsx)(d(),{href:"/server-list",className:"text-blue-600 hover:text-blue-700 underline font-medium",children:"查看 serverHttp 版本"})]})})})]})}},1687:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var n=r(5797),a=r(6275);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,n.$)(t))}},3041:(e,t,r)=>{"use strict";r.d(t,{L:()=>d,Jt:()=>p,gf:()=>o,LV:()=>f,bE:()=>h,WG:()=>c});let n={baseURL:"/api",timeout:3e4};async function a(e){if(!e.ok)throw Error("HTTP ".concat(e.status,": ").concat(e.statusText));let t=e.headers.get("content-type");if(!t||!t.includes("application/json"))throw Error("响应不是 JSON 格式");let r=await e.json();if(200!==r.code&&0!==r.code){let e=Error(r.message||"请求失败");throw e.code=r.code,e.data=r.data,e}return r}var s=r(3143);let i="auth_token",l={set(e,t,r){let n="".concat(e,"=").concat(encodeURIComponent(t),"; path=/; SameSite=Lax");if(r){let e=Math.floor(24*r*3600);n+="; max-age=".concat(e);let t=new Date;t.setTime(t.getTime()+24*r*36e5),n+="; expires=".concat(t.toUTCString())}document.cookie=n},get(e){let t="".concat(e,"="),r=document.cookie.split(";");for(let e=0;e<r.length;e++){let n=r[e];for(;" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(t))return decodeURIComponent(n.substring(t.length,n.length))}return null},remove(e){document.cookie="".concat(e,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; max-age=0")}};function o(){return l.get(i)}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:720;l.set(i,e,t/1440)}function d(){l.remove(i)}async function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:r="GET",headers:i={},searchParams:l,body:c,timeout:u=n.timeout,skipAuthRedirect:f=!1,showErrorToast:p=!0}=t,h=function(e,t){let r=n.baseURL;if(r.startsWith("/")&&((r=window.location.origin+r).endsWith("/")||(r+="/")),!r||r.startsWith("/")&&0){let n=r.endsWith("/")||e.startsWith("/")?"":"/",a=r+n+e;if(t){let e=new URLSearchParams;Object.entries(t).forEach(t=>{let[r,n]=t;e.append(r,String(n))});let r=e.toString();a+=r?"?".concat(r):""}return a}let a=new URL(e.startsWith("/")?e.slice(1):e,r);return t&&Object.entries(t).forEach(e=>{let[t,r]=e;a.searchParams.append(t,String(r))}),a.toString()}(e,l),m=o(),g={"Content-Type":"application/json",...i};m&&(g.Authorization="Bearer ".concat(m));let x={method:r,headers:g,credentials:"include"};c&&"GET"!==r&&(x.body=JSON.stringify(c));let v=new AbortController,b=setTimeout(()=>v.abort(),u);x.signal=v.signal;try{let e=await fetch(h,x);return await a(e)}catch(e){if(e instanceof Error){if(401===e.code&&(d(),f||(window.location.href="/login")),"AbortError"===e.name){let e=Error("请求超时，请稍后重试");throw p&&s.oR.error(e.message),e}p&&s.oR.error(e.message||"请求失败，请稍后重试")}throw e}finally{clearTimeout(b)}}async function f(e,t,r){return u(t,{method:e,searchParams:null==r?void 0:r.searchParams,body:null==r?void 0:r.body,...r})}async function p(e,t,r){return u(e,{method:"GET",searchParams:t,...r})}async function h(e,t,r){return u(e,{method:"POST",body:t,...r})}},3143:(e,t,r)=>{"use strict";r.d(t,{BO:()=>i,oR:()=>s});var n=r(8389);let a="app_toast",s={success:e=>{n.oR.success(e)},error:e=>{n.oR.error(e)},info:e=>{n.oR.info(e)},warning:e=>{n.oR.warning(e)},promise:n.oR.promise};function i(){var e;let t=null==(e=document.cookie.split("; ").find(e=>e.startsWith("".concat(a,"="))))?void 0:e.split("=")[1];if(t)try{let{type:e,message:r}=JSON.parse(decodeURIComponent(t));s[e](r),document.cookie="".concat(a,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/")}catch(e){console.error("Failed to parse toast cookie:",e)}}},3198:(e,t,r)=>{"use strict";r.d(t,{s:()=>i,t:()=>s});var n=r(1464);function a(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function s(...e){return t=>{let r=!1,n=e.map(e=>{let n=a(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():a(e[t],null)}}}}function i(...e){return n.useCallback(s(...e),e)}},5256:(e,t,r)=>{Promise.resolve().then(r.bind(r,131))},5661:(e,t,r)=>{"use strict";r.d(t,{F:()=>i});var n=r(5797);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,s=n.$,i=(e,t)=>r=>{var n;if((null==t?void 0:t.variants)==null)return s(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:l}=t,o=Object.keys(i).map(e=>{let t=null==r?void 0:r[e],n=null==l?void 0:l[e];if(null===t)return null;let s=a(t)||a(n);return i[e][s]}),c=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return s(e,o,null==t||null==(n=t.compoundVariants)?void 0:n.reduce((e,t)=>{let{class:r,className:n,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...c}[t]):({...l,...c})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},5834:(e,t,r)=>{"use strict";r.d(t,{DX:()=>u,TL:()=>d});var n,a=r(1464),s=r(3198),i=r(9700),l=Symbol.for("react.lazy"),o=(n||(n=r.t(a,2)))[" use ".trim().toString()];function c(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===l&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function d(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:r,...n}=e;if(c(r)&&"function"==typeof o&&(r=o(r._payload)),a.isValidElement(r)){var i;let e,l,o=(i=r,(l=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(l=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),c=function(e,t){let r={...t};for(let n in t){let a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...e)=>{let t=s(...e);return a(...e),t}:a&&(r[n]=a):"style"===n?r[n]={...a,...s}:"className"===n&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==a.Fragment&&(c.ref=t?(0,s.t)(t,o):o),a.cloneElement(r,c)}return a.Children.count(r)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=a.forwardRef((e,r)=>{let{children:n,...s}=e;c(n)&&"function"==typeof o&&(n=o(n._payload));let l=a.Children.toArray(n),d=l.find(p);if(d){let e=d.props.children,n=l.map(t=>t!==d?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,i.jsx)(t,{...s,ref:r,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null})}return(0,i.jsx)(t,{...s,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}var u=d("Slot"),f=Symbol("radix.slottable");function p(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===f}},7544:(e,t,r)=>{"use strict";r.d(t,{$:()=>o});var n=r(9700);r(1464);var a=r(5834),s=r(5661),i=r(1687);let l=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:r="default",size:s="default",asChild:o=!1,...c}=e,d=o?a.DX:"button";return(0,n.jsx)(d,{"data-slot":"button","data-variant":r,"data-size":s,className:(0,i.cn)(l({variant:r,size:s,className:t})),...c})}}},e=>{e.O(0,[4703,3144,8389,8789,1290,7358],()=>e(e.s=5256)),_N_E=e.O()}]);