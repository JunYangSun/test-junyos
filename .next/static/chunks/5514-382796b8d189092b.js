"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5514],{10:(e,t,r)=>{r.d(t,{BT:()=>l,Wu:()=>d,ZB:()=>s,Zp:()=>o,aR:()=>i});var n=r(9700);r(1464);var a=r(1687);function o(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function i(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function s(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...r})}function l(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t),...r})}function d(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...r})}},1431:(e,t,r)=>{r.d(t,{p:()=>o});var n=r(9700);r(1464);var a=r(1687);function o(e){let{className:t,type:r,...o}=e;return(0,n.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground bg-background border-input h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base text-foreground shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...o})}},1687:(e,t,r)=>{r.d(t,{cn:()=>o});var n=r(5797),a=r(6275);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,n.$)(t))}},2557:(e,t,r)=>{var n=r(7993);r.o(n,"permanentRedirect")&&r.d(t,{permanentRedirect:function(){return n.permanentRedirect}}),r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},3008:(e,t,r)=>{function n(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var n;let a=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),o=null!=(n=r.getItem(e))?n:null;return o instanceof Promise?o.then(a):a(o)},setItem:(e,n)=>r.setItem(e,JSON.stringify(n,null==t?void 0:t.replacer)),removeItem:e=>r.removeItem(e)}}r.d(t,{KU:()=>n,Zr:()=>o});let a=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>a(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>a(t)(e)}}},o=(e,t)=>(r,o,i)=>{let s,l={storage:n(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},d=!1,c=new Set,u=new Set,g=l.storage;if(!g)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),r(...e)},o,i);let f=()=>{let e=l.partialize({...o()});return g.setItem(l.name,{state:e,version:l.version})},m=i.setState;i.setState=(e,t)=>(m(e,t),f());let v=e((...e)=>(r(...e),f()),o,i);i.getInitialState=()=>v;let h=()=>{var e,t;if(!g)return;d=!1,c.forEach(e=>{var t;return e(null!=(t=o())?t:v)});let n=(null==(t=l.onRehydrateStorage)?void 0:t.call(l,null!=(e=o())?e:v))||void 0;return a(g.getItem.bind(g))(l.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===l.version)return[!1,e.state];else{if(l.migrate){let t=l.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[n,a]=e;if(r(s=l.merge(a,null!=(t=o())?t:v),!0),n)return f()}).then(()=>{null==n||n(s,void 0),s=o(),d=!0,u.forEach(e=>e(s))}).catch(e=>{null==n||n(void 0,e)})};return i.persist={setOptions:e=>{l={...l,...e},e.storage&&(g=e.storage)},clearStorage:()=>{null==g||g.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>h(),hasHydrated:()=>d,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},l.skipHydration||h(),s||v}},3041:(e,t,r)=>{r.d(t,{L:()=>c,Jt:()=>f,gf:()=>l,LV:()=>g,bE:()=>m,WG:()=>d});let n={baseURL:"/api",timeout:3e4};async function a(e){if(!e.ok)throw Error("HTTP ".concat(e.status,": ").concat(e.statusText));let t=e.headers.get("content-type");if(!t||!t.includes("application/json"))throw Error("响应不是 JSON 格式");let r=await e.json();if(200!==r.code&&0!==r.code){let e=Error(r.message||"请求失败");throw e.code=r.code,e.data=r.data,e}return r}var o=r(3143);let i="auth_token",s={set(e,t,r){let n="".concat(e,"=").concat(encodeURIComponent(t),"; path=/; SameSite=Lax");if(r){let e=Math.floor(24*r*3600);n+="; max-age=".concat(e);let t=new Date;t.setTime(t.getTime()+24*r*36e5),n+="; expires=".concat(t.toUTCString())}document.cookie=n},get(e){let t="".concat(e,"="),r=document.cookie.split(";");for(let e=0;e<r.length;e++){let n=r[e];for(;" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(t))return decodeURIComponent(n.substring(t.length,n.length))}return null},remove(e){document.cookie="".concat(e,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; max-age=0")}};function l(){return s.get(i)}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:720;s.set(i,e,t/1440)}function c(){s.remove(i)}async function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:r="GET",headers:i={},searchParams:s,body:d,timeout:u=n.timeout,skipAuthRedirect:g=!1,showErrorToast:f=!0}=t,m=function(e,t){let r=n.baseURL;if(r.startsWith("/")&&((r=window.location.origin+r).endsWith("/")||(r+="/")),!r||r.startsWith("/")&&0){let n=r.endsWith("/")||e.startsWith("/")?"":"/",a=r+n+e;if(t){let e=new URLSearchParams;Object.entries(t).forEach(t=>{let[r,n]=t;e.append(r,String(n))});let r=e.toString();a+=r?"?".concat(r):""}return a}let a=new URL(e.startsWith("/")?e.slice(1):e,r);return t&&Object.entries(t).forEach(e=>{let[t,r]=e;a.searchParams.append(t,String(r))}),a.toString()}(e,s),v=l(),h={"Content-Type":"application/json",...i};v&&(h.Authorization="Bearer ".concat(v));let p={method:r,headers:h,credentials:"include"};d&&"GET"!==r&&(p.body=JSON.stringify(d));let b=new AbortController,x=setTimeout(()=>b.abort(),u);p.signal=b.signal;try{let e=await fetch(m,p);return await a(e)}catch(e){if(e instanceof Error){if(401===e.code&&(c(),g||(window.location.href="/login")),"AbortError"===e.name){let e=Error("请求超时，请稍后重试");throw f&&o.oR.error(e.message),e}f&&o.oR.error(e.message||"请求失败，请稍后重试")}throw e}finally{clearTimeout(x)}}async function g(e,t,r){return u(t,{method:e,searchParams:null==r?void 0:r.searchParams,body:null==r?void 0:r.body,...r})}async function f(e,t,r){return u(e,{method:"GET",searchParams:t,...r})}async function m(e,t,r){return u(e,{method:"POST",body:t,...r})}},3143:(e,t,r)=>{r.d(t,{BO:()=>i,oR:()=>o});var n=r(8389);let a="app_toast",o={success:e=>{n.oR.success(e)},error:e=>{n.oR.error(e)},info:e=>{n.oR.info(e)},warning:e=>{n.oR.warning(e)},promise:n.oR.promise};function i(){var e;let t=null==(e=document.cookie.split("; ").find(e=>e.startsWith("".concat(a,"="))))?void 0:e.split("=")[1];if(t)try{let{type:e,message:r}=JSON.parse(decodeURIComponent(t));o[e](r),document.cookie="".concat(a,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/")}catch(e){console.error("Failed to parse toast cookie:",e)}}},5229:(e,t,r)=>{function n(e){return e?("string"==typeof e?new URLSearchParams(e):e).get("callbackUrl"):null}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";return e?e.startsWith("http://")||e.startsWith("https://")?(console.warn("不允许跳转到外部 URL，使用默认地址"),t):e.startsWith("/")?e:"/".concat(e):t}r.d(t,{M3:()=>a,zp:()=>n})},5399:(e,t,r)=>{r.d(t,{J:()=>d});var n=r(9700),a=r(1464);r(1049);var o=r(5834),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,o.TL)(`Primitive.${t}`),i=a.forwardRef((e,a)=>{let{asChild:o,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(o?r:t,{...i,ref:a})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{}),s=a.forwardRef((e,t)=>(0,n.jsx)(i.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null==(r=e.onMouseDown)||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var l=r(1687);function d(e){let{className:t,...r}=e;return(0,n.jsx)(s,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium text-foreground select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...r})}},5839:(e,t,r)=>{r.d(t,{n:()=>i});var n=r(9464),a=r(3008),o=r(3041);let i=(0,n.v)()((0,a.Zr)((e,t)=>({isLoggedIn:!1,token:null,user:null,login:(t,r,n)=>{(0,o.WG)(t,r),e({isLoggedIn:!0,token:t,user:n||null})},logout:()=>{(0,o.L)(),e({isLoggedIn:!1,token:null,user:null})},setUser:t=>{e({user:t})},checkAuth:()=>{let r=(0,o.gf)(),n=t();r&&!n.isLoggedIn?e({isLoggedIn:!0,token:r}):!r&&n.isLoggedIn&&e({isLoggedIn:!1,token:null,user:null})}}),{name:"auth-storage",storage:(0,a.KU)(()=>localStorage),partialize:e=>({user:e.user})}))},6821:(e,t,r)=>{r.d(t,{vk:()=>i,z8:()=>a});var n=r(3041);async function a(e){return(await (0,n.Jt)("/code",void 0,e)).data}async function o(e,t){return(0,n.bE)("/auth/login",e,t)}async function i(e,t){let r=await o(e,t);return(0,n.WG)(r.data.access_token,r.data.expires_in),r}},7544:(e,t,r)=>{r.d(t,{$:()=>l});var n=r(9700);r(1464);var a=r(5834),o=r(5661),i=r(1687);let s=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:r="default",size:o="default",asChild:l=!1,...d}=e,c=l?a.DX:"button";return(0,n.jsx)(c,{"data-slot":"button","data-variant":r,"data-size":o,className:(0,i.cn)(s({variant:r,size:o,className:t})),...d})}},9464:(e,t,r)=>{r.d(t,{v:()=>i});var n=r(1464);let a=e=>{let t,r=new Set,n=(e,n)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=n?n:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,o={setState:n,getState:a,getInitialState:()=>i,subscribe:e=>(r.add(e),()=>r.delete(e))},i=t=e(n,a,o);return o},o=e=>{let t=(e=>e?a(e):a)(e),r=e=>(function(e,t=e=>e){let r=n.useSyncExternalStore(e.subscribe,n.useCallback(()=>t(e.getState()),[e,t]),n.useCallback(()=>t(e.getInitialState()),[e,t]));return n.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},i=e=>e?o(e):o}}]);