exports.id=6891,exports.ids=[6891],exports.modules={14402:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(76139).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/sunjunyang/Documents/test-junyos/test-junyos/src/components/layout/tpl_default/ClientNavbar.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sunjunyang/Documents/test-junyos/test-junyos/src/components/layout/tpl_default/ClientNavbar.tsx","default")},16147:(a,b,c)=>{"use strict";c.d(b,{default:()=>f,useLayoutData:()=>e});var d=c(82045);function e(){let a=(0,d.c)();return{brand:{name:a("common.brand"),href:"/"},navigation:[{name:a("nav.home"),href:"/"},{name:a("nav.profile"),href:"/profile"},{name:a("nav.list"),href:"/list"}],authButtons:{login:{text:a("common.login"),href:"/login"},register:{text:a("common.register"),href:"/register"}}}}let f=e},23465:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>h});var d=c(73675);c(65881);var e=c(79826);async function f(){let a=await (0,e.A)();return{brand:{name:a("common.brand"),href:"/"},navigation:[{name:a("nav.home"),href:"/"},{name:a("nav.profile"),href:"/profile"},{name:a("nav.list"),href:"/list"}],authButtons:{login:{text:a("common.login"),href:"/login"},register:{text:a("common.register"),href:"/register"}}}}var g=c(14402);async function h({children:a}){let b=await f();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.default,{data:b}),(0,d.jsx)("main",{className:"bg-background pb-16 md:pb-0 md:min-h-screen",children:a})]})}},52136:(a,b,c)=>{"use strict";c.d(b,{L:()=>k,Jt:()=>n,gf:()=>i,LV:()=>m,bE:()=>o,WG:()=>j});let d={baseURL:"/api",timeout:3e4};async function e(a){if(!a.ok)throw Error(`HTTP ${a.status}: ${a.statusText}`);let b=a.headers.get("content-type");if(!b||!b.includes("application/json"))throw Error("响应不是 JSON 格式");let c=await a.json();if(200!==c.code&&0!==c.code){let a=Error(c.message||"请求失败");throw a.code=c.code,a.data=c.data,a}return c}var f=c(52565);let g="auth_token",h={set(a,b,c){},get:a=>null,remove(a){}};function i(){return h.get(g)}function j(a,b=720){console.warn("⚠️ setToken: 在服务端环境中无法设置 Cookie")}function k(){h.remove(g)}async function l(a,b={}){let{method:c="GET",headers:g={},searchParams:h,body:j,timeout:m=d.timeout,skipAuthRedirect:n=!1,showErrorToast:o=!0}=b,p=function(a,b){let c=d.baseURL;if(c.startsWith("/"),!c||c.startsWith("/")&&1){let d=c.endsWith("/")||a.startsWith("/")?"":"/",e=c+d+a;if(b){let a=new URLSearchParams;Object.entries(b).forEach(([b,c])=>{a.append(b,String(c))});let c=a.toString();e+=c?`?${c}`:""}return e}let e=new URL(a.startsWith("/")?a.slice(1):a,c);return b&&Object.entries(b).forEach(([a,b])=>{e.searchParams.append(a,String(b))}),e.toString()}(a,h),q=i(),r={"Content-Type":"application/json",...g};q&&(r.Authorization=`Bearer ${q}`);let s={method:c,headers:r,credentials:"include"};j&&"GET"!==c&&(s.body=JSON.stringify(j));let t=new AbortController,u=setTimeout(()=>t.abort(),m);s.signal=t.signal;try{let a=await fetch(p,s);return await e(a)}catch(a){if(a instanceof Error){if(401===a.code&&k(),"AbortError"===a.name){let a=Error("请求超时，请稍后重试");throw o&&f.oR.error(a.message),a}o&&f.oR.error(a.message||"请求失败，请稍后重试")}throw a}finally{clearTimeout(u)}}async function m(a,b,c){return l(b,{method:a,searchParams:c?.searchParams,body:c?.body,...c})}async function n(a,b,c){return l(a,{method:"GET",searchParams:b,...c})}async function o(a,b,c){return l(a,{method:"POST",body:b,...c})}},56146:(a,b,c)=>{"use strict";c.d(b,{default:()=>w});var d=c(91925),e=c(60560),f=c(26543),g=c(16550),h=c(80830),i=c(82045),j=c(34254),k=c(99457),l=c(26290),m=c(92241),n=c(15366),o=c(44359),p=c(22093),q=c(10097),r=c(99488);let s={default:(0,g.default)(()=>c.e(4934).then(c.bind(c,24934)),{loadableGenerated:{modules:["components/common/tabbar/index.tsx -> ./modes/default"]},loading:()=>(0,d.jsx)("div",{className:"h-12"})}),pill:(0,g.default)(()=>c.e(5036).then(c.bind(c,75036)),{loadableGenerated:{modules:["components/common/tabbar/index.tsx -> ./modes/pill"]},loading:()=>(0,d.jsx)("div",{className:"h-12"})}),underline:(0,g.default)(()=>c.e(261).then(c.bind(c,60261)),{loadableGenerated:{modules:["components/common/tabbar/index.tsx -> ./modes/underline"]},loading:()=>(0,d.jsx)("div",{className:"h-12"})}),card:(0,g.default)(()=>c.e(5271).then(c.bind(c,15271)),{loadableGenerated:{modules:["components/common/tabbar/index.tsx -> ./modes/card"]},loading:()=>(0,d.jsx)("div",{className:"h-12"})}),bottom:(0,g.default)(()=>c.e(6304).then(c.bind(c,56304)),{loadableGenerated:{modules:["components/common/tabbar/index.tsx -> ./modes/bottom"]},loading:()=>(0,d.jsx)("div",{className:"h-14"})})};function t({items:a,activeKey:b,defaultActiveKey:c,onChange:f,mode:g="default",className:h}){let i=function({items:a,activeKey:b,defaultActiveKey:c,onChange:d}){let[f,g]=(0,e.useState)(c||a[0]?.key||""),h=void 0!==b,i=h?b:f,j=(0,e.useCallback)(b=>{let c=a.find(a=>a.key===b);c?.disabled||(h||g(b),d?.(b))},[a,h,d]);return{items:a,activeKey:i,onChange:j}}({items:a,activeKey:b,defaultActiveKey:c,onChange:f}),j=s[g]||s.default;return(0,d.jsx)(j,{data:i,className:h})}function u(){let a=(0,f.useRouter)(),b=(0,f.usePathname)(),c=[{key:"/",label:"首页",icon:(0,d.jsx)(o.A,{className:"h-5 w-5"})},{key:"/order",label:"订单",icon:(0,d.jsx)(p.A,{className:"h-5 w-5"})},{key:"/card",label:"省钱卡",icon:(0,d.jsx)(q.A,{className:"h-5 w-5"})},{key:"/profile",label:"我的",icon:(0,d.jsx)(r.A,{className:"h-5 w-5"})}];return(0,d.jsx)(t,{items:c,activeKey:(()=>{let a=c.find(a=>b===a.key);if(a)return a.key;let d=c.find(a=>"/"!==a.key&&b.startsWith(a.key));return d?d.key:"/"})(),onChange:b=>{a.push(b)},mode:"bottom"})}let v=(0,g.default)(async()=>{},{loadableGenerated:{modules:["components/layout/tpl_default/ClientNavbar.tsx -> @/components/ui/LanguageSwitcher"]},ssr:!1});function w({data:a}){let b=(0,f.usePathname)(),[c,g]=(0,e.useState)(!1),{brand:o,navigation:p,authButtons:q}=a,{isLoggedIn:r,user:s,logout:t,checkAuth:w}=(0,m.n)(),{mode:x,toggleMode:y}=(0,n.C)(),z=(0,h.rd)(),A=(0,i.c)("common"),B=()=>{t(),z.push("/login")};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("nav",{className:"bg-card shadow-sm border-b border-border sticky top-0 z-50",children:(0,d.jsxs)("div",{className:"w-full mx-auto px-4 md:px-6 lg:px-8",children:[(0,d.jsxs)("div",{className:"flex justify-between h-14 md:h-16",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)(h.N_,{href:o.href,className:"text-lg md:text-xl font-bold text-foreground shrink-0",children:o.name}),(0,d.jsx)("div",{className:"hidden lg:flex ml-6 space-x-8",children:p.map(a=>(0,d.jsx)(h.N_,{href:a.href,className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${b===a.href?"border-primary text-foreground":"border-transparent text-muted-foreground hover:border-border hover:text-foreground"}`,children:a.name},a.name))})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 md:gap-3 lg:gap-4",children:[(0,d.jsx)(l.$,{variant:"outline",size:"icon",onClick:y,"aria-label":"切换主题模式",title:"light"===x?"切换到暗色模式":"切换到亮色模式",className:"shrink-0",children:"light"===x?(0,d.jsx)(j.A,{className:"h-4 w-4 md:h-[1.2rem] md:w-[1.2rem]"}):(0,d.jsx)(k.A,{className:"h-4 w-4 md:h-[1.2rem] md:w-[1.2rem]"})}),(0,d.jsx)("div",{className:"hidden lg:block",children:(0,d.jsx)(v,{})}),(0,d.jsx)("div",{className:"hidden lg:flex items-center gap-4",children:r?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"text-sm text-foreground",children:s?.username?`${A("welcome")}，${s.username}`:A("welcomeBack")}),(0,d.jsx)(l.$,{variant:"outline",onClick:B,className:"cursor-pointer",children:A("logout")})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.$,{variant:"outline",asChild:!0,children:(0,d.jsx)(h.N_,{href:q.login.href,children:q.login.text})}),(0,d.jsx)(l.$,{asChild:!0,children:(0,d.jsx)(h.N_,{href:q.register.href,children:q.register.text})})]})}),(0,d.jsx)("div",{className:"hidden md:flex lg:hidden items-center gap-3",children:r?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"text-sm text-foreground",children:s?.username?`${A("welcome")}，${s.username}`:A("welcomeBack")}),(0,d.jsx)(l.$,{variant:"outline",onClick:B,className:"cursor-pointer",children:A("logout")})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.$,{variant:"outline",asChild:!0,children:(0,d.jsx)(h.N_,{href:q.login.href,children:q.login.text})}),(0,d.jsx)(l.$,{asChild:!0,children:(0,d.jsx)(h.N_,{href:q.register.href,children:q.register.text})})]})}),!r&&(0,d.jsx)(l.$,{size:"sm",variant:"outline",asChild:!0,className:"md:hidden",children:(0,d.jsx)(h.N_,{href:q.login.href,children:q.login.text})}),(0,d.jsx)("button",{onClick:()=>g(!c),className:"lg:hidden p-2 rounded-md text-muted-foreground hover:text-foreground hover:bg-accent transition-colors","aria-label":"Toggle menu",children:(0,d.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c?(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),c&&(0,d.jsx)("div",{className:"lg:hidden border-t border-border bg-card",children:(0,d.jsxs)("div",{className:"px-4 py-2 space-y-1",children:[p.map(a=>(0,d.jsx)(h.N_,{href:a.href,onClick:()=>g(!1),className:`block px-3 py-2 rounded-md text-base font-medium transition-colors ${b===a.href?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-foreground"}`,children:a.name},a.name)),r?(0,d.jsxs)("div",{className:"pt-2 border-t border-border",children:[s?.username&&(0,d.jsxs)("p",{className:"px-3 py-2 text-sm text-muted-foreground",children:[A("welcome"),"，",s.username]}),(0,d.jsx)(l.$,{variant:"outline",onClick:()=>{B(),g(!1)},className:"w-full cursor-pointer",children:A("logout")})]}):(0,d.jsx)("div",{className:"pt-2 border-t border-border",children:(0,d.jsx)(l.$,{className:"w-full",asChild:!0,children:(0,d.jsx)(h.N_,{href:q.register.href,children:q.register.text})})})]})})]})}),(0,d.jsx)("div",{className:"md:hidden",children:(0,d.jsx)(u,{})})]})}},60356:(a,b,c)=>{Promise.resolve().then(c.bind(c,14402)),Promise.resolve().then(c.bind(c,65881))},65881:(a,b,c)=>{"use strict";c.d(b,{default:()=>f,useLayoutData:()=>e});var d=c(76139);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call useLayoutData() from the server but useLayoutData is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sunjunyang/Documents/test-junyos/test-junyos/src/lib/logic/common/layout/useLayoutData.ts","useLayoutData"),f=(0,d.registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/sunjunyang/Documents/test-junyos/test-junyos/src/lib/logic/common/layout/useLayoutData.ts\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sunjunyang/Documents/test-junyos/test-junyos/src/lib/logic/common/layout/useLayoutData.ts","default")},92241:(a,b,c)=>{"use strict";c.d(b,{n:()=>g});var d=c(93197),e=c(42636),f=c(52136);let g=(0,d.v)()((0,e.Zr)((a,b)=>({isLoggedIn:!1,token:null,user:null,login:(b,c,d)=>{(0,f.WG)(b,c),a({isLoggedIn:!0,token:b,user:d||null})},logout:()=>{(0,f.L)(),a({isLoggedIn:!1,token:null,user:null})},setUser:b=>{a({user:b})},checkAuth:()=>{let c=(0,f.gf)(),d=b();c&&!d.isLoggedIn?a({isLoggedIn:!0,token:c}):!c&&d.isLoggedIn&&a({isLoggedIn:!1,token:null,user:null})}}),{name:"auth-storage",storage:(0,e.KU)(()=>localStorage),partialize:a=>({user:a.user})}))},97156:(a,b,c)=>{Promise.resolve().then(c.bind(c,56146)),Promise.resolve().then(c.bind(c,16147))}};