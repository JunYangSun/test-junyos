exports.id=4334,exports.ids=[4334],exports.modules={2465:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(76139).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/sunjunyang/Documents/test-junyos/test-junyos/src/app/[locale]/@tpl_default/login/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sunjunyang/Documents/test-junyos/test-junyos/src/app/[locale]/@tpl_default/login/page.tsx","default")},10097:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(2564).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},16550:(a,b,c)=>{"use strict";c.d(b,{default:()=>e.a});var d=c(37977),e=c.n(d)},21459:(a,b,c)=>{"use strict";function d(a){return a?("string"==typeof a?new URLSearchParams(a):a).get("callbackUrl"):null}function e(a,b="/"){return a?a.startsWith("http://")||a.startsWith("https://")?(console.warn("不允许跳转到外部 URL，使用默认地址"),b):a.startsWith("/")?a:`/${a}`:b}c.d(b,{M3:()=>e,zp:()=>d})},22093:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(2564).A)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},23307:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>r});var d=c(91925),e=c(60560),f=c(77192),g=c.n(f),h=c(40088),i=c(26543),j=c(63959),k=c(92241),l=c(21459),m=c(52565),n=c(26290),o=c(71988),p=c(91216),q=c(41186);function r({fullPage:a=!0}){let b=(0,i.useRouter)(),c=(0,i.useSearchParams)(),f=(0,k.n)(a=>a.login),[r,s]=(0,e.useState)({username:"",password:"",code:""}),[t,u]=(0,e.useState)(""),[v,w]=(0,e.useState)(null),[x,y]=(0,e.useState)(!1),[z,A]=(0,e.useState)(!1),B=(0,l.zp)(c),C=async()=>{y(!0);try{let a=await (0,j.z8)();w(a)}catch(a){console.error("获取验证码失败:",a)}finally{y(!1)}},D=async a=>{if(a.preventDefault(),u(""),!v?.uuid){u("请等待验证码加载完成"),m.oR.warning("请等待验证码加载完成");return}A(!0);try{let a=(0,j.vk)({username:r.username,password:r.password,code:r.code,uuid:v.uuid},{showErrorToast:!1});m.oR.promise(a,{loading:"登录中...",success:"登录成功！",error:a=>a.message||"登录失败，请检查用户名和密码"});let c=await a;f(c.data.access_token,c.data.expires_in);let d=(0,l.M3)(B,"/");b.push(d)}catch(a){console.log("error--\x3e",a),u(a.message||"登录失败，请检查用户名和密码"),C(),s(a=>({...a,code:""}))}finally{A(!1)}},E=a=>{let{name:b,value:c}=a.target;s(a=>({...a,[b]:c})),t&&u("")};return(0,d.jsx)("div",{className:a?"min-h-screen flex items-center justify-center px-4":"flex items-center justify-center px-4 py-8 md:py-12",children:(0,d.jsxs)(o.Zp,{className:"w-full max-w-md",children:[(0,d.jsxs)(o.aR,{className:"text-center",children:[(0,d.jsx)(o.ZB,{className:"text-2xl font-bold",children:"登录账户"}),(0,d.jsx)(o.BT,{children:"输入您的用户名和密码以访问您的账户"})]}),(0,d.jsxs)(o.Wu,{children:[(0,d.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(q.J,{htmlFor:"username",children:"用户名"}),(0,d.jsx)(p.p,{id:"username",name:"username",type:"text",placeholder:"请输入用户名",value:r.username,onChange:E,required:!0,disabled:z})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(q.J,{htmlFor:"password",children:"密码"}),(0,d.jsx)(p.p,{id:"password",name:"password",type:"password",placeholder:"请输入密码",value:r.password,onChange:E,required:!0,disabled:z})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(q.J,{htmlFor:"code",children:"验证码"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(p.p,{id:"code",name:"code",type:"text",placeholder:"请输入验证码",value:r.code,onChange:E,required:!0,disabled:z,className:"flex-1"}),(0,d.jsx)("div",{className:"w-32 h-10 border border-gray-300 rounded-md flex items-center justify-center bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>C(),title:"点击刷新验证码",children:x?(0,d.jsx)("span",{className:"text-xs text-gray-500",children:"加载中..."}):v?.img?(0,d.jsx)(h.default,{src:`data:image/png;base64,${v.img}`,alt:"验证码",width:128,height:40,className:"w-full h-full object-cover rounded",unoptimized:!0}):(0,d.jsx)("span",{className:"text-xs text-gray-500",children:"点击加载"})})]}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"点击验证码图片可刷新"})]}),t&&(0,d.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:(0,d.jsx)("p",{className:"text-sm text-red-600",children:t})}),(0,d.jsx)(n.$,{type:"submit",className:"w-full",disabled:z||x,children:z?"登录中...":"登录"})]}),(0,d.jsxs)("div",{className:"mt-6 text-center text-sm",children:[(0,d.jsx)("span",{className:"text-gray-600",children:"还没有账户？"})," ",(0,d.jsx)(g(),{href:"/register",className:"text-blue-600 hover:text-blue-500 font-medium",children:"立即注册"})]}),(0,d.jsx)("div",{className:"mt-4 text-center",children:(0,d.jsx)(g(),{href:"/",className:"text-sm text-gray-600 hover:text-gray-500",children:"返回首页"})})]})]})})}},26651:(a,b,c)=>{Promise.resolve().then(c.bind(c,2465))},32669:(a,b,c)=>{Promise.resolve().then(c.bind(c,77064))},34254:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(2564).A)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]])},37267:(a,b,c)=>{Promise.resolve().then(c.bind(c,23307))},37977:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"default",{enumerable:!0,get:function(){return e}});let d=c(90340)._(c(75817));function e(a,b){var c;let e={};"function"==typeof a&&(e.loader=a);let f={...e,...b};return(0,d.default)({...f,modules:null==(c=f.loadableGenerated)?void 0:c.modules})}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},41186:(a,b,c)=>{"use strict";c.d(b,{J:()=>j});var d=c(91925),e=c(60560);c(86881);var f=c(77783),g=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=(0,f.TL)(`Primitive.${b}`),g=e.forwardRef((a,e)=>{let{asChild:f,...g}=a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,d.jsx)(f?c:b,{...g,ref:e})});return g.displayName=`Primitive.${b}`,{...a,[b]:g}},{}),h=e.forwardRef((a,b)=>(0,d.jsx)(g.label,{...a,ref:b,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));h.displayName="Label";var i=c(67821);function j({className:a,...b}){return(0,d.jsx)(h,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium text-foreground select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...b})}},44359:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(2564).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},55601:(a,b)=>{"use strict";function c(a){return a.split("/").map(a=>encodeURIComponent(a)).join("/")}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"encodeURIPath",{enumerable:!0,get:function(){return c}})},60285:(a,b,c)=>{Promise.resolve().then(c.bind(c,69482))},62927:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"PreloadChunks",{enumerable:!0,get:function(){return h}});let d=c(91925),e=c(86881),f=c(29294),g=c(55601);function h(a){let{moduleIds:b}=a,c=f.workAsyncStorage.getStore();if(void 0===c)return null;let h=[];if(c.reactLoadableManifest&&b){let a=c.reactLoadableManifest;for(let c of b){if(!a[c])continue;let b=a[c].files;h.push(...b)}}return 0===h.length?null:(0,d.jsx)(d.Fragment,{children:h.map(a=>{let b=c.assetPrefix+"/_next/"+(0,g.encodeURIPath)(a);return a.endsWith(".css")?(0,d.jsx)("link",{precedence:"dynamic",href:b,rel:"stylesheet",as:"style"},a):((0,e.preload)(b,{as:"script",fetchPriority:"low"}),null)})})}},63959:(a,b,c)=>{"use strict";c.d(b,{vk:()=>g,z8:()=>e});var d=c(52136);async function e(a){return(await (0,d.Jt)("/code",void 0,a)).data}async function f(a,b){return(0,d.bE)("/auth/login",a,b)}async function g(a,b){let c=await f(a,b);return(0,d.WG)(c.data.access_token,c.data.expires_in),c}},69482:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>r});var d=c(91925),e=c(60560),f=c(77192),g=c.n(f),h=c(40088),i=c(26543),j=c(63959),k=c(92241),l=c(21459),m=c(52565),n=c(26290),o=c(71988),p=c(91216),q=c(41186);function r({fullPage:a=!0}){let b=(0,i.useRouter)(),c=(0,i.useSearchParams)(),f=(0,k.n)(a=>a.login),[r,s]=(0,e.useState)({username:"",password:"",code:""}),[t,u]=(0,e.useState)(""),[v,w]=(0,e.useState)(null),[x,y]=(0,e.useState)(!1),[z,A]=(0,e.useState)(!1),B=(0,l.zp)(c),C=async()=>{y(!0);try{let a=await (0,j.z8)();w(a)}catch(a){console.error("获取验证码失败:",a)}finally{y(!1)}},D=async a=>{if(a.preventDefault(),u(""),!v?.uuid){u("请等待验证码加载完成"),m.oR.warning("请等待验证码加载完成");return}A(!0);try{let a=(0,j.vk)({username:r.username,password:r.password,code:r.code,uuid:v.uuid},{showErrorToast:!1});m.oR.promise(a,{loading:"登录中...",success:"登录成功！",error:a=>a.message||"登录失败，请检查用户名和密码"});let c=await a;f(c.data.access_token,c.data.expires_in);let d=(0,l.M3)(B,"/");b.push(d)}catch(a){console.log("error--\x3e",a),u(a.message||"登录失败，请检查用户名和密码"),C(),s(a=>({...a,code:""}))}finally{A(!1)}},E=a=>{let{name:b,value:c}=a.target;s(a=>({...a,[b]:c})),t&&u("")};return(0,d.jsx)("div",{className:a?"min-h-screen flex items-center justify-center px-4":"flex items-center justify-center px-4 py-8 md:py-12",children:(0,d.jsxs)(o.Zp,{className:"w-full max-w-md",children:[(0,d.jsxs)(o.aR,{className:"text-center",children:[(0,d.jsx)(o.ZB,{className:"text-2xl font-bold",children:"登录账户"}),(0,d.jsx)(o.BT,{children:"输入您的用户名和密码以访问您的账户"})]}),(0,d.jsxs)(o.Wu,{children:[(0,d.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(q.J,{htmlFor:"username",children:"用户名"}),(0,d.jsx)(p.p,{id:"username",name:"username",type:"text",placeholder:"请输入用户名",value:r.username,onChange:E,required:!0,disabled:z})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(q.J,{htmlFor:"password",children:"密码"}),(0,d.jsx)(p.p,{id:"password",name:"password",type:"password",placeholder:"请输入密码",value:r.password,onChange:E,required:!0,disabled:z})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(q.J,{htmlFor:"code",children:"验证码"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(p.p,{id:"code",name:"code",type:"text",placeholder:"请输入验证码",value:r.code,onChange:E,required:!0,disabled:z,className:"flex-1"}),(0,d.jsx)("div",{className:"w-32 h-10 border border-gray-300 rounded-md flex items-center justify-center bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>C(),title:"点击刷新验证码",children:x?(0,d.jsx)("span",{className:"text-xs text-gray-500",children:"加载中..."}):v?.img?(0,d.jsx)(h.default,{src:`data:image/png;base64,${v.img}`,alt:"验证码",width:128,height:40,className:"w-full h-full object-cover rounded",unoptimized:!0}):(0,d.jsx)("span",{className:"text-xs text-gray-500",children:"点击加载"})})]}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"点击验证码图片可刷新"})]}),t&&(0,d.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:(0,d.jsx)("p",{className:"text-sm text-red-600",children:t})}),(0,d.jsx)(n.$,{type:"submit",className:"w-full",disabled:z||x,children:z?"登录中...":"登录"})]}),(0,d.jsxs)("div",{className:"mt-6 text-center text-sm",children:[(0,d.jsx)("span",{className:"text-gray-600",children:"还没有账户？"})," ",(0,d.jsx)(g(),{href:"/register",className:"text-blue-600 hover:text-blue-500 font-medium",children:"立即注册"})]}),(0,d.jsx)("div",{className:"mt-4 text-center",children:(0,d.jsx)(g(),{href:"/",className:"text-sm text-gray-600 hover:text-gray-500",children:"返回首页"})})]})]})})}},73515:(a,b,c)=>{"use strict";function d(){return null}c.r(b),c.d(b,{default:()=>d})},75817:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"default",{enumerable:!0,get:function(){return j}});let d=c(91925),e=c(60560),f=c(81602),g=c(62927);function h(a){return{default:a&&"default"in a?a.default:a}}let i={loader:()=>Promise.resolve(h(()=>null)),loading:null,ssr:!0},j=function(a){let b={...i,...a},c=(0,e.lazy)(()=>b.loader().then(h)),j=b.loading;function k(a){let h=j?(0,d.jsx)(j,{isLoading:!0,pastDelay:!0,error:null}):null,i=!b.ssr||!!b.loading,k=i?e.Suspense:e.Fragment,l=b.ssr?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.PreloadChunks,{moduleIds:b.modules}),(0,d.jsx)(c,{...a})]}):(0,d.jsx)(f.BailoutToCSR,{reason:"next/dynamic",children:(0,d.jsx)(c,{...a})});return(0,d.jsx)(k,{...i?{fallback:h}:{},children:l})}return k.displayName="LoadableComponent",k}},77064:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(76139).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/sunjunyang/Documents/test-junyos/test-junyos/src/app/[locale]/login/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sunjunyang/Documents/test-junyos/test-junyos/src/app/[locale]/login/page.tsx","default")},81602:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"BailoutToCSR",{enumerable:!0,get:function(){return e}});let d=c(23678);function e(a){let{reason:b,children:c}=a;throw Object.defineProperty(new d.BailoutToCSRError(b),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},91216:(a,b,c)=>{"use strict";c.d(b,{p:()=>f});var d=c(91925);c(60560);var e=c(67821);function f({className:a,type:b,...c}){return(0,d.jsx)("input",{type:b,"data-slot":"input",className:(0,e.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground bg-background border-input h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base text-foreground shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...c})}},99457:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(2564).A)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},99488:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(2564).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}};